<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-toast/paper-toast.html">

<!--
`hot-user-message-toasts`

Simple, tiny widget that will listen to user-message-success, user-message-info and user-message-error and will display a paper-toast with the message.

Each event type has a different paper toast assigned to it. Each paper toast is themable with a mixin.
Because of the nature of the toasts, this widget should be higher up in your DOM.

In your index.html you might have:

    <hot-user-message-toasts>
      <my-app></my-app>
    </hot-user-message-toasts>

@demo demo/index.html
-->

<dom-module id="hot-user-message-toasts">
  <template>
    <style>
      :host {
        display: block;
      }
      paper-toast#success {
        --paper-toast-background-color: green;
        --paper-toast-color: white;
        @apply(hot-user-message-toasts-success);
      }
      ;
      paper-toast#info {
        --paper-toast-background-color: gray;
        --paper-toast-color: white;
        @apply(hot-user-message-toasts-success);
      };

      paper-toast#error {
        --paper-toast-background-color: red;
        --paper-toast-color: white;
        @apply(hot-user-message-toasts-success);
      };
    </style>

    <paper-toast id="success"></paper-toast>
    <paper-toast id="info"></paper-toast>
    <paper-toast id="error"></paper-toast>
    <content></content>
  </template>

  <script>
    Polymer({

      is: 'hot-user-message-toasts',

      attached: function(){
        this.listen( this, 'user-message-success', '_messageArrived' );
        this.listen( this, 'user-message-info', '_messageArrived' );
        this.listen( this, 'user-message-error', '_messageArrived' );
      },

      detached: function(){
        this.unlisten( this, 'user-message-success', '_messageArrived' );
        this.unlisten( this, 'user-message-info', '_messageArrived' );
        this.unlisten( this, 'user-message-error', '_messageArrived' );
      },

      _messageArrived: function( e ){
        var type = e.type.split('-')[2];
        var toast = this.$[ type ];
        toast.text = e.detail.message;
        toast.show();
      }
    });
  </script>
</dom-module>
